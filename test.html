<!DOCTYPE html>
<html>
<head>
    <title>Dashboard ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ (Modern UI - Fixed Map)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Leaflet CSS: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ü‡∏£‡∏µ) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
    <!-- Tailwind CSS (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞ Responsive) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* CSS: Custom Styles for Modern Look */
        body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }
        /* ‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å: ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏° (Primary) */
        .primary-bg { background-color: #1a4d6e; }
        .primary-text { color: #1a4d6e; }
        /* ‡∏™‡∏µ‡∏£‡∏≠‡∏á: ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á/‡∏™‡πâ‡∏° (Accent/Alert) */
        .accent-color { color: #f9d342; }
        .alert-bg { background-color: #fef3c7; } /* bg-amber-100 */
        .alert-text { color: #b45309; } /* text-amber-700 */

        .sidebar { height: 100vh; overflow-y: auto; }
        .map-container { height: 65vh; border: 1px solid #e2e8f0; }
        #map { height: 100%; width: 100%; }
        
        /* Stat Box Card */
        .stat-box { transition: transform 0.2s, box-shadow 0.2s; }
        .stat-box:hover { transform: translateY(-3px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }

        /* Alert Item */
        .alert-item { border-left: 5px solid #cc0000; cursor: pointer; transition: background-color 0.2s; }
        .alert-item:hover { background-color: #fee2e2; } /* bg-red-100 */

        /* Responsive: ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        @media (max-width: 768px) {
            body { display: block; }
            .sidebar { width: 100%; height: auto; order: 2; padding-bottom: 2rem; }
            .main-content { padding: 1rem; order: 1; }
            .map-container { height: 50vh; }
            .md\:flex { flex-direction: column; }
        }
    </style>
</head>
<body class="md:flex">

    <!-- 1. ‡πÅ‡∏ñ‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á: ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (Sidebar) -->
    <div id="sidebar" class="sidebar md:w-80 flex-shrink-0 primary-bg shadow-2xl">
        <div class="p-5">
            <h2 class="text-3xl font-extrabold mb-5 accent-color">üåä Rescue Dashboard</h2>
            
            <!-- ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå -->
            <div class="mb-6 p-4 rounded-xl bg-blue-800 shadow-inner">
                <h3 class="text-xl font-bold text-white mb-3 border-b border-blue-600 pb-2">‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏£‡∏ß‡∏°</h3>
                <div class="grid grid-cols-2 gap-3">
                    <!-- ‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏†‡∏±‡∏¢ -->
                    <div class="stat-box bg-red-600 text-white shadow-lg">
                        <span id="total-victims" class="stat-number">0</span>
                        <span class="stat-label">‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏†‡∏±‡∏¢ (‡∏£‡∏≠‡∏ä‡πà‡∏ß‡∏¢)</span>
                    </div>
                    <!-- ‡∏ó‡∏µ‡∏°‡∏Å‡∏π‡πâ‡∏†‡∏±‡∏¢ -->
                    <div class="stat-box bg-white primary-text shadow-lg">
                        <span id="total-rescuers" class="stat-number">0</span>
                        <span class="stat-label">‡∏ó‡∏µ‡∏°‡∏Å‡∏π‡πâ‡∏†‡∏±‡∏¢‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</span>
                    </div>
                </div>
            </div>

            <!-- ‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• -->
            <div class="mb-6 p-4 rounded-xl bg-blue-800 shadow-inner">
                <h3 class="text-xl font-bold text-white mb-3 border-b border-blue-600 pb-2">‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà)</h3>
                <label class="block text-sm text-gray-200 mb-2 font-medium"><input type="checkbox" id="filter-victims" checked class="mr-2 accent-red-500"> ‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏†‡∏±‡∏¢</label>
                <label class="block text-sm text-gray-200 mb-2 font-medium"><input type="checkbox" id="filter-rescuers" checked class="mr-2 accent-green-500"> ‡∏ó‡∏µ‡∏°‡∏Å‡∏π‡πâ‡∏†‡∏±‡∏¢</label>
                <label class="block text-sm text-gray-200 font-medium"><input type="checkbox" id="filter-command" checked class="mr-2 accent-yellow-500"> ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£</label>
            </div>
            
            <!-- ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (Alerts) -->
            <h3 class="text-xl font-bold accent-color mb-3 border-b border-blue-600 pb-2">üö® ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</h3>
            <div id="alerts-list" class="space-y-2">
                <!-- Alert items will be appended here -->
                <div class="alert-item alert-bg alert-text p-3 rounded-md shadow-sm" onclick="zoomToLocation(7.0691, 100.3541, '‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏Å')">
                    <span class="font-bold">NEW!</span> ‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏Å ‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠
                </div>
                <div class="alert-item alert-bg alert-text p-3 rounded-md shadow-sm" onclick="zoomToLocation(7.0250, 100.4000, '‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ‡∏™‡∏¥‡∏ô‡πÑ‡∏û‡πÇ‡∏£‡∏à‡∏ô‡πå')">
                    <span class="font-bold">NEW!</span> ‡∏™‡∏¥‡∏ô‡πÑ‡∏û‡πÇ‡∏£‡∏à‡∏ô‡πå ‡∏ï‡∏¥‡∏î‡∏ö‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≤
                </div>
            </div>
        </div>
    </div>

    <!-- 2. ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏Å: ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° (Main Content) -->
    <div id="main-content" class="main-content flex-grow p-4 md:p-6">
        <h1 class="text-3xl font-extrabold primary-text mb-6">üìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå (‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏™‡∏á‡∏Ç‡∏•‡∏≤)</h1>
        
        <!-- ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà Leaflet -->
        <div id="map-container" class="map-container rounded-xl shadow-2xl">
            <div id="map"></div>
        </div>

        <!-- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡∏°‡∏Å‡∏π‡πâ‡∏†‡∏±‡∏¢‡πÅ‡∏ö‡πà‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (‡∏ï‡∏≤‡∏£‡∏≤‡∏á/‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£) -->
        <div id="rescue-summary-container" class="mt-8">
            <h3 class="text-xl font-bold primary-text mb-4 border-b-2 border-blue-300 pb-2">üõ†Ô∏è ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡∏°‡∏Å‡∏π‡πâ‡∏†‡∏±‡∏¢‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</h3>
            <div class="overflow-x-auto rounded-xl shadow-lg">
                <table class="min-w-full">
                    <thead>
                        <tr class="bg-blue-600 text-white uppercase text-sm leading-normal">
                            <th class="py-3 px-6 text-left">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th class="py-3 px-6 text-center">‡∏£‡∏ß‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th class="py-3 px-6 text-center">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="rescue-type-body" class="bg-white text-gray-700 text-sm font-light divide-y divide-gray-200">
                        <!-- Data will be inserted by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
    </div>

    <!-- 3. JavaScript ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Leaflet -->
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20n69z7kLqT1n8zI/r7V5w+wP/k5+R7lQ/3A+Q+4JcQ="
        crossorigin=""></script>
    
    <script>
        // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà (‡∏™‡∏á‡∏Ç‡∏•‡∏≤)
        const initialLocation = [7.00, 100.47]; 
        const initialZoom = 11;
        let map;
        let markers = L.layerGroup(); 

        // ** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á (Mock Data) **
        const mockData = {
            victims: [
                { id: 1, lat: 7.0691, lng: 100.3541, type: 'Victim', status: 'Waiting', info: '‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏Å - ‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏ 2 ‡∏Ñ‡∏ô' },
                { id: 2, lat: 7.0250, lng: 100.4000, type: 'Victim', status: 'Waiting', info: '‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏¥‡∏ô‡πÑ‡∏û‡πÇ‡∏£‡∏à‡∏ô‡πå - ‡∏ï‡∏¥‡∏î‡∏ö‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≤ 3 ‡∏Ñ‡∏ô' },
            ],
            rescuers: [
                { id: 101, lat: 7.0000, lng: 100.5000, type: 'Boat (Small)', status: 'Available', info: '‡∏ó‡∏µ‡∏° ‡∏õ‡∏†. - ‡πÄ‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡πá‡∏Å' },
                { id: 102, lat: 7.0750, lng: 100.4500, type: 'Truck (High-Lift)', status: 'En Route', info: '‡∏°‡∏π‡∏•‡∏ô‡∏¥‡∏ò‡∏¥‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏ï‡∏±‡∏ç‡∏ç‡∏π - ‡∏£‡∏ñ‡∏¢‡∏Å‡∏™‡∏π‡∏á' },
                { id: 103, lat: 7.0100, lng: 100.3200, type: 'Helicopter', status: 'Returning', info: '‡∏ó‡∏±‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® - ‡∏Æ. ‡∏•‡∏≥‡∏ó‡∏µ‡πà 1' },
                { id: 104, lat: 6.9800, lng: 100.5500, type: 'Boat (Flat-bottom)', status: 'Available', info: '‡∏≠‡∏≤‡∏™‡∏≤‡∏™‡∏°‡∏±‡∏Ñ‡∏£ - ‡πÄ‡∏£‡∏∑‡∏≠‡∏ó‡πâ‡∏≠‡∏á‡πÅ‡∏ö‡∏ô' },
            ],
            commands: [
                { id: 201, lat: 7.0125, lng: 100.4900, type: 'Command Center', info: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å ‡∏™‡∏á‡∏Ç‡∏•‡∏≤' },
            ]
        };

        // **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà**
        function initMap() {
            map = L.map('map').setView(initialLocation, initialZoom);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 18
            }).addTo(map);

            markers.addTo(map); 

            // **‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•: ‡πÉ‡∏´‡πâ Leaflet ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏°‡πà‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏´‡∏•‡∏î**
            setTimeout(() => {
                map.invalidateSize();
            }, 500); // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 500ms

            // ‡πÅ‡∏™‡∏î‡∏á Marker
            renderMarkers();
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Filter Event Listeners
            document.getElementById('filter-victims').addEventListener('change', renderMarkers);
            document.getElementById('filter-rescuers').addEventListener('change', renderMarkers);
            document.getElementById('filter-command').addEventListener('change', renderMarkers);

            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ
            updateSummary();
            updateRescueTypeSummary();

            // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
            setInterval(updateLocationSimulation, 10000); 
        }

        // **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á Leaflet Icon ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏™‡∏µ**
        function createIcon(color) {
            // ‡πÉ‡∏ä‡πâ icon ‡∏™‡∏µ‡∏à‡∏≤‡∏Å pointhi/leaflet-color-markers
            return new L.Icon({
                iconUrl: `https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${color}.png`,
                shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
                iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41]
            });
        }

        // **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á Marker ‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà**
        function renderMarkers() {
            markers.clearLayers(); 

            const showVictims = document.getElementById('filter-victims').checked;
            const showRescuers = document.getElementById('filter-rescuers').checked;
            const showCommand = document.getElementById('filter-command').checked;
            
            const victimIcon = createIcon('red'); 
            const commandIcon = createIcon('darkred'); 

            // ‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏†‡∏±‡∏¢ (‡∏™‡∏µ‡πÅ‡∏î‡∏á)
            if (showVictims) {
                mockData.victims.forEach(v => {
                    addMarker(v.lat, v.lng, `‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏†‡∏±‡∏¢: ${v.info}`, victimIcon);
                });
            }

            // ‡∏ó‡∏µ‡∏°‡∏Å‡∏π‡πâ‡∏†‡∏±‡∏¢ (‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó)
            if (showRescuers) {
                mockData.rescuers.forEach(r => {
                    let iconColor;
                    if (r.type.includes('Boat')) {
                        iconColor = 'blue'; 
                    } else if (r.type.includes('Truck')) {
                        iconColor = 'green';
                    } else if (r.type.includes('Helicopter')) {
                        iconColor = 'purple';
                    } else {
                        iconColor = 'gray';
                    }
                    const rescueIcon = createIcon(iconColor);
                    addMarker(r.lat, r.lng, `‡∏Å‡∏π‡πâ‡∏†‡∏±‡∏¢: ${r.info} (${r.status})`, rescueIcon);
                });
            }

            // ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ (‡∏™‡∏µ‡πÅ‡∏î‡∏á‡πÄ‡∏Ç‡πâ‡∏°)
            if (showCommand) {
                 mockData.commands.forEach(c => {
                    addMarker(c.lat, c.lng, `‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£: ${c.info}`, commandIcon);
                });
            }
        }

        // **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏° Marker ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß**
        function addMarker(lat, lng, title, icon) {
            const marker = L.marker([lat, lng], {icon: icon})
                .bindPopup(`**${title}**`, { closeButton: false, autoClose: false }) 
                .on('mouseover', function() { this.openPopup(); })
                .on('mouseout', function() { this.closePopup(); });
            
            markers.addLayer(marker);
        }

        // **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏ß‡∏°**
        function updateSummary() {
            document.getElementById('total-victims').innerText = mockData.victims.length;
            document.getElementById('total-rescuers').innerText = mockData.rescuers.length;
        }

        // **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏µ‡∏°‡∏Å‡∏π‡πâ‡∏†‡∏±‡∏¢**
        function updateRescueTypeSummary() {
            const types = {};
            const activeCount = {};

            mockData.rescuers.forEach(r => {
                types[r.type] = (types[r.type] || 0) + 1;
                if (r.status !== 'Available') { 
                    activeCount[r.type] = (activeCount[r.type] || 0) + 1;
                }
            });

            const tbody = document.getElementById('rescue-type-body');
            tbody.innerHTML = ''; 

            for (const type in types) {
                const total = types[type];
                const active = activeCount[type] || 0;
                const row = tbody.insertRow();
                row.className = 'hover:bg-blue-50 transition duration-150 ease-in-out';
                
                row.innerHTML = `
                    <td class="py-3 px-6 text-left">${type}</td>
                    <td class="py-3 px-6 text-center font-medium">${total}</td>
                    <td class="py-3 px-6 text-center font-extrabold text-lg text-${active > 0 ? 'red-600' : 'green-600'}">${active}</td>
                `;
            }
        }
        
        // **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (Real-time)**
        function updateLocationSimulation() {
            // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
            mockData.rescuers.forEach(r => {
                r.lat += (Math.random() - 0.5) * 0.005; 
                r.lng += (Math.random() - 0.5) * 0.005; 
                
                // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
                if (Math.random() < 0.2) {
                    const statuses = ['Available', 'En Route', 'Rescuing', 'Returning'];
                    r.status = statuses[Math.floor(Math.random() * statuses.length)];
                }
            });
            renderMarkers(); 
            updateRescueTypeSummary(); 
        }

        // **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ã‡∏π‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å Alert)**
        function zoomToLocation(lat, lng, title) {
            if (map) {
                map.setView([lat, lng], 15); 
            }
            showToast(`üöÄ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏π‡∏°‡πÑ‡∏õ‡∏ó‡∏µ‡πà: ${title}`);
        }

        // **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á Toast Message (‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö Pop-up)**
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-5 left-1/2 transform -translate-x-1/2 p-4 bg-blue-600 text-white font-semibold rounded-lg shadow-xl transition-opacity duration-300 z-50';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏≠‡∏á‡πÉ‡∏ô 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
        document.addEventListener('DOMContentLoaded', initMap);
        
    </script>

</body>
</html>